<div class="container"ng-app="bomControle">
    <div class="page-test-front-end" ng-controller="createUserController">
        <div class="jumbotron">
            <h2 class="page-title text-center">
                Cadastro de Usuário
            </h2>
            <div class="row">
                <div class="col-sm-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Informações de Cadastro
                        </div>
                        <div class="panel-body">
                            <form name="userRegister">
                                <div class="form-group">
                                    <label for="name" class="required">Nome</label>
                                    <input type="text" class="form-control" name="name" placeholder="Digite seu nome" ng-model="usuario.name" ng-required="true">
                                </div>
                                <div class="form-group">
                                    <label for="email"  class="required">E-mail</label>
                                    <input type="email" class="form-control" name="email" placeholder="Digite seu e-mail" ng-model="usuario.email" ng-required="true" ng-pattern='/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/'>
                                    <div ng-messages="userRegister.email.$error">
                                        <div ng-message="pattern" class="error">
                                            Preencha o e-mail corretamente
                                        </div>
                                    </div>
                                </div>
                                <h3 class="form-item-title">Informações Pessoais</h3>
                                <div class="row">
                                    <div class="col-sm-12 col-md-6">
                                        <div class="form-group">
                                            <label for="cpf" class="required">CPF</label>
                                            <input type="text" class="form-control" name="cpf" placeholder="___.___.___-__"  ng-model="usuario.cpf" ng-required="true" ui-br-cpf-mask ng-pattern="/^\d{3}.\d{3}.\d{3}-\d{2}$/">
                                            <div ng-messages="userRegister.cpf.$error">
                                                <div ng-message="pattern" class="error">
                                                    Preencha o CPF corretamente
                                                </div>
                                            </div>
                                            <div ng-if="userRegister.cpf.$invalid && userRegister.cpf.$dirty" class="error">
                                                Número de CPF inválido
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="dateBirth" class="required">Data de nascimento</label>
                                            <input type="text" class="form-control" name="dateBirth" placeholder="__/__/____"  ng-model="usuario.dateBirth" ng-required="true" ui-date-mask  ng-pattern="/^\d{2}/\d{2}/\d{4}$/">
                                            <div ng-messages="userRegister.dateBirth.$error">
                                                <div ng-message="pattern" class="error">
                                                    Preencha a data de nascimento corretamente
                                                </div>
                                        		</div>
                                            <div ng-if="userRegister.dateBirth.$invalid && userRegister.dateBirth.$dirty" class="error">
                                                Data de nascimento inválida
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sex">Sexo</label>
                                            <select class="form-control" name="sex" ng-model="usuario.sex" ng-init="usuario.sex = 'male'">
                                                <option value="male" ng-selected="defaultOption">Masculino</option>
                                                <option value="Female">Feminino</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                        <div class="form-group">
                                            <label for="phone">Telefone</label>
                                            <input type="text" class="form-control" name="phone" placeholder="(__)____-____" ng-model="usuario.phone" ui-br-phone-number ng-pattern="/^((\(\d{2}\) ?)|(\d{2}-))?\d{4,5}-\d{4}$/">
                                            <div ng-messages="userRegister.phone.$error">
                                                <div ng-message="pattern" class="error">
                                                    Preencha o telefone corretamente
                                                </div>
                                        		</div>
                                        </div>
                                        <div class="form-group">
                                            <label for="celular">Celular</label>
                                            <input type="text" class="form-control" name="celular" placeholder="(__)_____-____" ng-model="usuario.celular" ui-br-phone-number ng-pattern="/^((\(\d{2}\) ?)|(\d{2}-))?\d{5}-\d{4}$/">
                                            <div ng-messages="userRegister.celular.$error">
                                                <div ng-message="pattern" class="error">
                                                    Preencha o celular corretamente
                                                </div>
                                        		</div>
                                        </div>
                                    </div>
                                </div>
                                <h3 class="form-item-title">Informações de Endereço</h3>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label for="cep">CEP</label>
                                            <input type="text" class="form-control" name="cep" placeholder="_____-___" ng-model="usuario.address.cep" ui-br-cep-mask ng-pattern="/^\d{5}-\d{3}$/">
                                            <div ng-messages="userRegister.cep.$error">
                                                <div ng-message="pattern" class="error">
                                                    Preencha o CEP corretamente
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-10">
                                        <div class="form-group">
                                            <label for="street">Endereço</label>
                                            <input type="text" class="form-control" name="street" placeholder="Digite seu endereço" ng-model="usuario.address.street">
                                        </div>
                                    </div>
                                    <div class="col-sm-2">
                                      <div class="form-group">
                                          <label for="number">Número</label>
                                          <input type="text" class="form-control" name="number" placeholder="_____" ng-model="usuario.address.number" ui-number-mask="0">
                                      </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-10">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label for="city">Cidade</label>
                                                    <input type="text" class="form-control" name="city" placeholder="Digite a cidade" ng-model="usuario.address.city">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-9">
                                        <p>* Campos obrigatórios</p>
                                        <p>&ensp; Preencha os campos obrigatórios para habilitar o botão</p>
                                    </div>
                                    <div class="col-sm-3">
                                      <div class="form-group">
                                          <button class="form-control btn btn-success btn-block" ng-click="add(usuario)" ng-disabled="userRegister.$invalid">
                                              Cadastrar
                                          </button>
                                      </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Resultados
                        </div>
                        <div class="panel-body">
                            <div class="form-group">
                                <label for="busca">Busca rápida:</label>
                                <input type="text" class="form-control" name="busca" ng-model="busca" placeholder="Digite algo para buscar">
                            </div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th scope="col"></th>
                                        <th scope="col">Nome</th>
                                        <th scope="col">E-mail</th>
                                        <th scope="col">CPF</th>
                                        <th scope="col">Data nasc.</th>
                                        <th scope="col">Sexo</th>
                                        <th scope="col">Telefone</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="(key, usuario) in usuarios | filter:busca">
                                        <th scope="row">{{key}}</th>
                                        <td>{{usuario.name}}</td>
                                        <td>{{usuario.email}}</td>
                                        <td>{{usuario.cpf | cpf}}</td>
                                        <td>{{usuario.dateBirth | date : "dd/MM/y"}}</td>
                                        <td ng-if="usuario.sex == 'male'">Masc.</td>
                                        <td ng-if="usuario.sex == 'Female'">Fem.</td>
                                        <td>{{usuario.phone | telefone}}</td>
                                        <td>
                                            <i ng-click="delete(usuario)" class="icon-remove text-center">+</i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
